<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aura Fugaz Beauty</title>
  <meta name="theme-color" content="#1a1a1a">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --negro: #1a1a1a;
      --rosa: #f8c8dc;
      --lila: #d5b3f0;
      --blanco: #fff;
    }
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: var(--negro);
      color: var(--blanco);
    }
    header {
      text-align: center;
      padding: 1rem;
      background: var(--negro);
      border-bottom: 2px solid var(--lila);
      position: relative;
    }
    header img {
      max-width: 180px;
    }
    #btn-menu {
      position: absolute;
      left: 1rem;
      top: 0.4rem;
      background: var(--lila);
      color: var(--negro);
      border: none;
      font-size: 1.5rem;
      border-radius: 6px;
      padding: 0.2rem 0.6rem;
      cursor: pointer;
      z-index: 1001;
    }
    #menu-lateral {
      position: fixed;
      top: 0;
      left: 0;
      width: 220px;
      height: 100%;
      background: var(--negro);
      border-right: 1px solid var(--lila);
      overflow-y: auto;
      padding: 1rem;
      z-index: 1000;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
    }
    #menu-lateral.abierto {
      transform: translateX(0);
    }
    #menu-lateral::after {
      position: absolute;
      top: 10px;
      right: 100px;
      font-size: 1.3rem;
      color: var(--lila);
      cursor: pointer;
    }
    #menu-lateral h3 {
      color: var(--rosa);
      margin-bottom: 1rem;
    }
    .categoria {
      margin-bottom: 1rem;
    }
    .subcategoria {
      margin-left: 1rem;
      font-size: 0.9rem;
      color: var(--lila);
      cursor: pointer;
    }
    #productos {
      padding: 1rem;
      margin-left: 0;
    }
    .seccion-categoria {
      margin-bottom: 2rem;
    }
    .titulo-categoria {
      color: var(--rosa);
      font-size: 1.3rem;
      margin: 0rem 0;
    }
    .carrusel {
      display: flex;
      overflow-x: auto;
      gap: 1rem;
      padding-bottom: 0.5rem;
    }
    .carrusel::-webkit-scrollbar {
      height: 6px;
    }
    .carrusel::-webkit-scrollbar-thumb {
      background: var(--rosa);
      border-radius: 3px;
    }
    .carrusel-horizontal {
  display: flex;
  overflow-x: auto;
  gap: 12px;
  padding: 0 12px 20px;
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
}

.carrusel-horizontal::-webkit-scrollbar {
  display: none;
}

.titulo-sub {
  color: var(--rosa);
  font-size: 1.2rem;
  margin: 20px 0 10px 12px;
}

.producto {
  flex: 0 0 auto;
  width: 160px;
  background: #1a1a1a;
  border-radius: 16px;
  padding: 10px;
  color: #fff;
  scroll-snap-align: start;
  box-shadow: 0 0 8px rgba(255, 182, 255, 0.2);
}
    .producto:hover {
      transform: scale(1.05);
      box-shadow: 0 0 12px var(--lila);
    }
.producto img {
  width: 100%;
  max-width: 160px;
  height: auto;
  margin: 0 auto 0.5rem;
  border-radius: 8px;
}
    .producto h4 {
      margin: 0.5rem 0 0.3rem;
      font-size: 1rem;
    }
    .producto button {
      background: var(--rosa);
      color: var(--negro);
      border: none;
      padding: 0.4rem 1rem;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
    }
    #carrito-icono {
  position: fixed;
  bottom: 1.2rem;      /* ‚Üê Abajo */
  right: 1.2rem;       /* ‚Üê A la derecha */
  background: var(--lila);
  color: var(--negro);
  border-radius: 50%;
  width: 50px;
  height: 50px;
  font-size: 1.4rem;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  z-index: 999;
  box-shadow: 0 0 10px var(--rosa);
  animation: brillar 2s infinite alternate;
}
}
    @keyframes brillar {
      0% { box-shadow: 0 0 10px var(--rosa); }
      100% { box-shadow: 0 0 20px var(--lila); }
    }
#carrito {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width: 400px;
  height: auto;
  max-height: 90vh;
  background: #1c1c1c;
  border: 2px solid var(--lila);
  border-radius: 12px;
  padding: 7rem;
  overflow-y: auto;
  z-index: 998;
  display: none;
  box-shadow: 0 0 20px var(--lila);
}
    #carrito h2 {
      color: var(--rosa);
      text-align: center;
      margin-bottom: 1rem;
    }
    .item-carrito {
      border-bottom: 1px solid var(--rosa);
      padding: 0.5rem 0;
      font-size: 0.9rem;
    }
    #form-cliente input, #form-cliente select {
      width: 100%;
      margin-bottom: 0.5rem;
      padding: 0.4rem;
      border-radius: 6px;
      border: none;
      background: #2d2d2d;
      color: var(--blanco);
      border: 1px solid var(--lila);
    }
    #resumen-total {
      margin: 1rem 0;
      font-weight: bold;
      text-align: center;
      color: var(--lila);
    }
    #btn-whatsapp {
      background: var(--rosa);
      color: var(--negro);
      padding: 0.6rem;
      border-radius: 20px;
      border: none;
      width: 100%;
      font-weight: bold;
      cursor: pointer;
    }
    @media(min-width: 768px) {
    #menu-lateral {
  transform: translateX(-100%); /* cerrado */
  transition: transform 0.3s ease;
}
#menu-lateral.abierto {
  transform: translateX(0); /* abierto solo al hacer clic */
}
    }
    .marquee {
  background-color: var(--lila);
  color: var(--negro);
  padding: 0.4rem 0;
  overflow: hidden;
  white-space: nowrap;
  font-weight: bold;
  font-size: 0.9rem;
  position: relative;
  z-index: 1000;
}

.marquee-contenido {
  display: inline-block;
  padding-left: 100%;
  animation: marqueeAnim 15s linear infinite;
}

@keyframes marqueeAnim {
  0% { transform: translateX(0); }
  100% { transform: translateX(-100%); }
}
 .redes-sociales {
  display: flex;
  justify-content: center;
  gap: 1.2rem;
  margin-top: 1.5rem;
  font-size: 2rem;
}

.redes-sociales a {
  text-decoration: none;
  color: var(--lila); /* Cambia aqu√≠ el color base */
  transition: transform 0.3s, color 0.3s;
}

.redes-sociales a:hover {
  transform: scale(1.2);
  color: var(--rosa); /* Cambia aqu√≠ el color al pasar el mouse */
}
encabezado {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.6rem 1rem;
  background: var(--negro);
  border-bottom: 2px solid var(--lila);
  position: sticky;
  top: 0;
  z-index: 999;
  flex-wrap: wrap;
}

.logo-header {
  max-width: 200px;
  margin: 0 auto;
}

#btn-menu {
  background: var(--lila);
  color: var(--negro);
  border: none;
  font-size: 1.5rem;
  border-radius: 6px;
  padding: 0.3rem 0.6rem;
  cursor: pointer;
}

.derecha-header {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.redes-header {
  display: flex;
  gap: 1.5rem;
  font-size: 2rem;
  margin-bottom: 0.4rem;
}

.redes-header a {
  color: var(--lila);
  text-decoration: none;
  transition: transform 0.3s;
}
.redes-header a:hover {
  transform: scale(1.2);
  color: var(--rosa);
}

.busqueda-header {
  display: flex;
  align-items: center;
  gap: 0.4rem;
}

#btn-buscador {
  background: var(--lila);
  border: none;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  font-size: 1.1rem;
  color: var(--negro);
  cursor: pointer;
  transition: transform 0.3s ease;
}

#buscador {
  width: 0;
  opacity: 0;
  padding: 0.4rem;
  border-radius: 8px;
  border: 1px solid var(--lila);
  background: #2a2a2a;
  color: white;
  font-size: 0.9rem;
  transition: width 0.4s ease, opacity 0.4s ease;
}

#buscador.visible {
  width: 150px;
  opacity: 1;
}
  </style>
</head>
<body>
  <div class="marquee">
  <div class="marquee-contenido">
    üíå Env√≠os a todo el pa√≠s &nbsp; üíå Env√≠os a todo el pa√≠s &nbsp; üíå Env√≠os a todo el pa√≠s &nbsp; üíå Env√≠os a todo el pa√≠s
  </div>
</div>
<header class="encabezado">
  <button id="btn-menu" onclick="toggleMenu()">‚ò∞</button>
  <img src="img/001.png" alt="Aura Fugaz Beauty" class="logo-header" />
      <div class="busqueda-header">
      <button id="btn-buscador" onclick="toggleBuscador()">üîç</button>
      <input type="text" id="buscador" placeholder="Buscar..." oninput="filtrarProductos(this.value)" />
    </div>

  <div class="derecha-header">
    <div class="redes-header">
      <a href="https://www.instagram.com/aurafugaz_bt" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
      <a href="https://wa.me/593978691045" target="_blank" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
      <a href="https://tiktok.com/@aura_fugaz_beauty" target="_blank" title="TikTok"><i class="fab fa-tiktok"></i></a>
    </div>


  </div>
</header>
  

<div id="menu-lateral">
  <p>‚ô•</p>
  <span id="cerrar-menu" style="position:absolute;top:10px;right:10px;font-size:1.3rem;color:var(--lila);cursor:pointer;">‚úñ</span>
  <h3>Categor√≠as</h3>
<div class="categoria">
  <strong>Maquillaje</strong>
<li onclick="filtrarPorSubcategoria('Rubores')">Rubores</li>
<li onclick="filtrarPorSubcategoria('Labiales')">Labiales</li>
<strong>Accesorios</strong>
<li onclick="filtrarPorSubcategoria('Brochas')">Brochas</li>
</div>
<div class="subcategoria">
  <li onclick="filtrarPorSubcategoria('Todo')" style="color: var(--rosa); cursor:pointer;">üõçÔ∏è Ver Todo<li>
</div>
</div>
<main id="productos"></main>
<div id="productos-container"></div>
<div id="carrito-icono" onclick="toggleCarrito()">üõí</div>
<div id="carrito">
  <span id="cerrar-carrito" style="position:absolute;top:10px;right:10px;font-size:1.5rem;color:var(--lila);cursor:pointer;">‚úñ</span>
  <h2>Tu carrito</h2>
  <div id="items-carrito"></div>
  <form id="form-cliente">
    <input type="text" id="nombre" placeholder="Tu nombre" required />
    <select id="ciudad">
      <option disabled selected>Selecciona ciudad</option>
      <option value="Quito">Quito</option>
      <option value="Guayaquil">Guayaquil</option>
      <option value="Cuenca">Cuenca</option>
      <option value="Otra">Otra</option>
    </select>
    <select id="pago">
      <option disabled selected>Forma de pago</option>
      <option value="Transferencia">Transferencia</option>
      <option value="Contra entrega">Contra entrega</option>
    </select>
    <select id="env√≠o">
      <option disabled selected>Forma de Envio</option>
      <option value="Servientrega">Servientrega</option>
      <option value="Cooperativa">Cooperativa</option>
    </select>
  </form>
  <div id="resumen-total">
    Subtotal: $<span id="subtotal">0.00</span><br>
    Env√≠o: $<span id="envio">0.00</span><br>
    <strong>Total: $<span id="total">0.00</span></strong>
  </div>
  <button id="btn-whatsapp" onclick="enviarWhatsApp()">Enviar pedido</button>
</div>
<script>
const productos = [
  {
    id: 1,
    nombre: "Cristal Jelly Lip Oil",
    categoria: "Maquillaje",
    subcategoria: "Labiales",
    precio: 2.5,
    tonos: {
      "Rosa Cristal": { imagenes: ["img/Lipoilr.jpg", "img/Lipoilr1.jpg"], stock: 2 },
      "Lila Cristal": { imagenes: ["img/Lipoilm.jpg", "img/Lipoilm1.jpg"], stock: 2 },
      "Verde Cristal": { imagenes: ["img/Lipoilv.jpg", "img/Lipoilv1.jpg"], stock: 3 }
    }
  },
  {
    id: 2,
    nombre: "Rubor Jelly",
    categoria: "Maquillaje",
    subcategoria: "Rubores",
    precio: 3,
    tonos: {
      "Tono 1": { imagenes: ["img/Jellym1.0.jpg","img/Jellym1.jpg"], stock: 1 },
      "Tono 2": { imagenes: ["img/Jellym2.0.jpg","img/Jellym2.jpg"], stock: 1 }
    }
  },
  {
    id: 3,
    nombre: "Rubor en Polvo Gege Bear",
    categoria: "Maquillaje",
    subcategoria: "Rubores",
    precio: 3,
    tonos: {
      "Tono 1": { imagenes: ["img/Rubor.jpg","img/Rub1.jpg","img/Rub1.0.jpg"], stock: 1 },
      "Tono 2": { imagenes: ["img/Rubor.jpg","img/Rub2.jpg","img/Rub2.0.jpg"], stock: 1 },
      "Tono 3": { imagenes: ["img/Rubor.jpg","img/Rub3.jpg","img/Rub3.0.jpg"], stock: 1 },
      "Tono 4": { imagenes: ["img/Rubor.jpg","img/Rub4.jpg","img/Rub4.0.jpg"], stock: 1 }
    }
  },
  {
    id: 4,
    nombre: "Rubor Cushion Gege Bear",
    categoria: "Maquillaje",
    subcategoria: "Rubores",
    precio: 3,
    tonos: {
      "Tono 1": { imagenes: ["img/Cushion.jpg","img/Cush1.jpg"], stock: 1 },
      "Tono 2": { imagenes: ["img/Cushion2.jpg","img/Cush2.jpg"], stock: 1 },
      "Tono 3": { imagenes: ["img/Cushion3.jpg","img/Cush3.jpg"], stock: 1 }
    }
  },
  {
    id: 5,
    nombre: "Lip Gloss Bobeni",
    categoria: "Maquillaje",
    subcategoria: "Labiales",
    precio: 2,
    tonos: {
      "Tono 1": { imagenes: ["img/honey.jpg", "img/honey1.jpg", "img/honey1.0.jpg"], stock: 4 },
      "Tono 2": { imagenes: ["img/honey.jpg", "img/honey2.jpg", "img/honey2.0.jpg"], stock: 4 },
      "Tono 3": { imagenes: ["img/honey.jpg", "img/honey3.jpg", "img/honey3.0.jpg"], stock: 3 }
    }
  },
   {
    id: 6,
    nombre: "B√°lsamo Dup Dior",
    categoria: "Maquillaje ",
    subcategoria: "Labiales",
    precio: 3.25,
     tonos:{
      "UNICO": {imagenes: ["img/baldup.jpg", "img/baldup2.jpg", "img/baldup1.jpg"],stock:1 }
  }
  },
  {
    id: 7,
    nombre: "Set de Brochas Cute",
    categoria: "Accesorios",
    subcategoria: "Brochas",
    precio: 12.0,
    imagenes: ["brochas1.jpg", "brochas2.jpg"]
  }
];
const carrito = [];

  const menu = document.getElementById("menu-lateral");
  const contenedor = document.getElementById("productos");
  const itemsCarrito = document.getElementById("items-carrito");

function toggleMenu() {
  const btnMenu = document.getElementById("btn-menu");
  const menu = document.getElementById("menu-lateral");

  menu.classList.add("abierto");
  btnMenu.style.display = "none"; // Oculta el bot√≥n ‚ò∞
}
document.getElementById("cerrar-menu").addEventListener("click", function() {
  document.getElementById("menu-lateral").classList.remove("abierto");
  document.getElementById("btn-menu").style.display = "inline-block"; // vuelve a mostrar el √≠cono ‚ò∞
});

function cerrarMenu() {
  const btnMenu = document.getElementById("btn-menu");
  const menu = document.getElementById("menu-lateral");

  menu.classList.remove("abierto");
  btnMenu.style.display = "block"; // Vuelve a mostrar el bot√≥n ‚ò∞
}

  function toggleCarrito() {
    const carritoDiv = document.getElementById("carrito");
    carritoDiv.style.display = carritoDiv.style.display === "block" ? "none" : "block";
  }

function crearHTMLProducto(producto) {
  const div = document.createElement("div");
  div.className = "producto";

  let imagen = "";
  if (producto.tonos) {
    const primerTono = Object.keys(producto.tonos)[0];
    imagen = producto.tonos[primerTono].imagenes[0];
  } else if (producto.imagenes) {
    imagen = producto.imagenes[0];
  }

  div.innerHTML = `
    <img src="${imagen}" alt="${producto.nombre}" onclick="mostrarImagenGrande('${imagen}')" style="cursor:pointer;" />
    <h4>${producto.nombre}</h4>
    <p>$${producto.precio.toFixed(2)}</p>
    <button onclick="abrirModal(${producto.id})">Ver</button>
  `;

  return div;
}

function filtrarPorSubcategoria(nombreSubcategoria) {
  const contenedor = document.getElementById("productos-container");
  contenedor.innerHTML = "";

  const subcategorias = [...new Set(productos.map(p => p.subcategoria))];

  subcategorias.forEach(sub => {
    if (nombreSubcategoria !== "Todo" && sub !== nombreSubcategoria) return;

    const titulo = document.createElement("h2");
    titulo.textContent = sub;
    titulo.className = "titulo-sub";
    contenedor.appendChild(titulo);

    const carrusel = document.createElement("div");
    carrusel.className = "carrusel-horizontal";

    const productosSub = productos.filter(p => p.subcategoria === sub);
    productosSub.forEach(producto => {
      const card = crearHTMLProducto(producto);
      carrusel.appendChild(card);
    });

    contenedor.appendChild(carrusel);
  });

  // Oculta el contenedor original si existe
  const original = document.getElementById("productos");
  if (original) original.style.display = "none";

  contenedor.style.display = "block";
}

function mostrarImagenGrande(url) {
  const modalImg = document.createElement("div");
  modalImg.style.position = "fixed";
  modalImg.style.top = "0";
  modalImg.style.left = "0";
  modalImg.style.width = "100%";
  modalImg.style.height = "100%";
  modalImg.style.background = "rgba(0,0,0,0.9)";
  modalImg.style.display = "flex";
  modalImg.style.justifyContent = "center";
  modalImg.style.alignItems = "center";
  modalImg.style.zIndex = "10000";
  modalImg.innerHTML = `
    <img src="${url}" style="max-width:90%;max-height:90%;border-radius:10px;" />
    <span onclick="this.parentElement.remove()" style="position:absolute;top:10px;right:20px;color:#fff;font-size:2rem;cursor:pointer;">‚úñ</span>
  `;
  document.body.appendChild(modalImg);
}

window.addEventListener("DOMContentLoaded", () => {
  filtrarPorSubcategoria("Todo");
});
function toggleMenu() {
      const menu = document.getElementById("menu-lateral");
      menu.classList.toggle("abierto");
    }

    // Cierra men√∫ si se hace click afuera (opcional)
    document.addEventListener("click", (e) => {
      const menu = document.getElementById("menu-lateral");
      const btnMenu = document.getElementById("btn-menu");
      if (!menu.contains(e.target) && !btnMenu.contains(e.target)) {
        menu.classList.remove("abierto");
      }
    });

    // Al cargar la p√°gina mostrar todos
    window.addEventListener("DOMContentLoaded", () => {
      filtrarPorSubcategoria("Todo");
    });
    const btnMenu = document.getElementById("btn-menu");
const menuLateral = document.getElementById("menu-lateral");
const cerrarMenuBtn = document.getElementById("cerrar-menu");

// Funci√≥n para abrir men√∫ y ocultar bot√≥n men√∫
function toggleMenu() {
  const abierto = menuLateral.classList.toggle("abierto");
  btnMenu.style.display = abierto ? "none" : "block";
}

// Funci√≥n para cerrar men√∫ y mostrar bot√≥n men√∫
function cerrarMenu() {
  menuLateral.classList.remove("abierto");
  btnMenu.style.display = "block";
}

// Al hacer clic en bot√≥n cerrar
cerrarMenuBtn.addEventListener("click", cerrarMenu);

// Al hacer clic en una subcategor√≠a tambi√©n se cierra men√∫ y aparece bot√≥n
document.querySelectorAll("#menu-lateral li, #menu-lateral .subcategoria strong").forEach(el => {
  el.addEventListener("click", () => {
    cerrarMenu();
  });
});
function toggleCarrito() {
    const carritoDiv = document.getElementById("carrito");
    carritoDiv.style.display = carritoDiv.style.display === "block" ? "none" : "block";
  }
function mostrarProductos() {
    const categorias = [...new Set(productos.map(p => p.categoria))];
    categorias.forEach(cat => {
      const seccion = document.createElement("section");
      seccion.className = "seccion-categoria";
seccion.dataset.categoria = cat;
      seccion.innerHTML = `<h2 class="titulo-categoria">${cat}</h2><div class="carrusel"></div>`;
      const carrusel = seccion.querySelector(".carrusel");

      productos.filter(p => p.categoria === cat).forEach(producto => {
        let imagen = "";
        if (producto.tonos) {
          const primerTono = Object.keys(producto.tonos)[0];
          imagen = producto.tonos[primerTono].imagenes[0];
        } else if (producto.imagenes) {
          imagen = producto.imagenes[0];
        }

        const div = document.createElement("div");
      div.className = "producto";
      div.dataset.subcategoria = producto.subcategoria || "";
        div.setAttribute("data-subcategoria", producto.subcategoria || ""); // üëà AGREGADO
        div.innerHTML = `
          <img src="${imagen}" alt="${producto.nombre}" onclick="mostrarImagenGrande('${imagen}')" style="cursor:pointer;" />
          <h4>${producto.nombre}</h4>
          <p>$${producto.precio.toFixed(2)}</p>
          <button onclick="abrirModal(${producto.id})">Ver</button>
        `;
        carrusel.appendChild(div);
      });

      contenedor.appendChild(seccion);
    });
  }

document.getElementById("buscador").addEventListener("input", e => {
  filtrarProductos(e.target.value);
});
function filtrarProductos(texto) {
  const contenedor = document.getElementById("productos-container");
  contenedor.innerHTML = "";

  const textoLower = texto.toLowerCase();
  const subcategorias = [...new Set(productos.map(p => p.subcategoria))];

  subcategorias.forEach(sub => {
    const productosFiltrados = productos.filter(p => 
      p.subcategoria === sub && 
      (p.nombre.toLowerCase().includes(textoLower) || sub.toLowerCase().includes(textoLower))
    );

    if (productosFiltrados.length > 0) {
      const titulo = document.createElement("h2");
      titulo.textContent = sub;
      titulo.className = "titulo-sub";
      contenedor.appendChild(titulo);

      const carrusel = document.createElement("div");
      carrusel.className = "carrusel-horizontal";

      productosFiltrados.forEach(producto => {
        const card = crearHTMLProducto(producto);
        carrusel.appendChild(card);
      });

      contenedor.appendChild(carrusel);
    }
  });

  // Oculta el contenedor original si existe
  const original = document.getElementById("productos");
  if (original) original.style.display = "none";

  contenedor.style.display = "block";
}
function resaltarTexto(textoOriginal, textoBuscado) {
  const regex = new RegExp(`(${textoBuscado})`, 'gi');
  return textoOriginal.replace(regex, '<mark style="background:var(--lila); color:black;">$1</mark>');
}

function limpiarBusqueda() {
  const buscador = document.getElementById("buscador");
  buscador.value = "";
  mostrarProductos();
}
  function filtrarSubcategoria(nombre) {
  const secciones = document.querySelectorAll(".seccion-categoria");

  secciones.forEach(seccion => {
    const productos = seccion.querySelectorAll(".producto");
    let visibles = 0;

    productos.forEach(p => {
      const sub = p.dataset.subcategoria || "";
      if (nombre === "Todo" || sub === nombre) {
        p.style.display = "block";
        visibles++;
      } else {
        p.style.display = "none";
      }
    });

    // Muestra la secci√≥n solo si hay productos visibles
    seccion.style.display = visibles > 0 ? "block" : "none";
  });

  // Cierra el men√∫ si est√° abierto (opcional)
  menu.classList.remove("abierto");
}
  function abrirModal(id) {
    const producto = productos.find(p => p.id === id);
    let galeriaHTML = "";

    if (producto.tonos) {
      const tonos = Object.keys(producto.tonos);
      galeriaHTML = producto.tonos[tonos[0]].imagenes.map(url => `
  <img src="${url}" style="width:100px;border-radius:8px;cursor:pointer;" onclick="mostrarImagenGrande('${url}')" />
`).join("");
    } else if (producto.imagenes) {
      galeriaHTML = producto.imagenes.map(url => `<img src="${url}" style="width:100px;border-radius:8px;" />`).join("");
    }

    let selectorTonoHTML = "";
    if (producto.tonos) {
      selectorTonoHTML = `
        <select id="selector-tono" style="width:100%;margin-bottom:1rem;">
          ${Object.keys(producto.tonos).map(t => `<option value="${t}">${t}</option>`).join("")}
        </select>
      `;
    }

    let html = `
      <div id="modal" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);z-index:9999;display:flex;justify-content:center;align-items:center;">
        <div style="background:#1e1e1e;padding:1rem;border-radius:10px;width:90%;max-width:400px;">
          <h2 style="color:var(--rosa);text-align:center;">${producto.nombre}</h2>
          ${selectorTonoHTML}
          <div id="galeria-tono" style="display:flex;gap:0.5rem;overflow-x:auto;">
            ${galeriaHTML}
          </div>
          <div style="margin:1rem 0;">Cantidad: 
            <button onclick="cambiarCantidad(-1)">‚ûñ</button>
            <span id="cantidad">1</span>
            <button onclick="cambiarCantidad(1)">‚ûï</button>
          </div>
          <div style="text-align:center;">
            <button onclick="agregarAlCarrito(${producto.id})" style="background:var(--rosa);border:none;padding:0.5rem 1rem;border-radius:20px;">Agregar al carrito</button>
            <button onclick="cerrarModal()" style="margin-left:0.5rem;background:#888;border:none;padding:0.5rem 1rem;border-radius:20px;">Cerrar</button>
          </div>
        </div>
      </div>`;

    document.body.insertAdjacentHTML("beforeend", html);

    if (producto.tonos) {
      document.getElementById("selector-tono").addEventListener("change", function (e) {
  const tono = e.target.value;
  const imagenes = producto.tonos[tono].imagenes;
  const galeriaHTML = imagenes.map(url => `
    <img src="${url}" 
         style="width:100px;border-radius:8px;cursor:pointer;" 
         onclick="mostrarImagenGrande('${url}')" />
  `).join("");
  document.getElementById("galeria-tono").innerHTML = galeriaHTML;
});
    }
  }

  function cambiarCantidad(valor) {
    const cantidadSpan = document.getElementById("cantidad");
    let cantidad = parseInt(cantidadSpan.textContent);
    cantidad = Math.max(1, cantidad + valor);
    cantidadSpan.textContent = cantidad;
  }

  function cerrarModal() {
    const modal = document.getElementById("modal");
    if (modal) modal.remove();
  }

  function agregarAlCarrito(id) {
  const producto = productos.find(p => p.id === id);
  const cantidad = parseInt(document.getElementById("cantidad").textContent);
  let tono = "√önico";

  if (producto.tonos) {
    tono = document.getElementById("selector-tono").value;
    const stock = producto.tonos[tono].stock;
    // Validar stock sin descontar a√∫n
    const yaEnCarrito = carrito
      .filter(item => item.id === id && item.tono === tono)
      .reduce((suma, item) => suma + item.cantidad, 0);

    if (cantidad + yaEnCarrito > stock) {
      const disponibles = stock - yaEnCarrito;
      alert(`Solo hay ${disponibles} disponibles para ${tono}`);
      return;
    }
  }

  carrito.push({ ...producto, cantidad, tono });
  actualizarCarrito();
  cerrarModal();
}

function calcularSubtotal() {
  return carrito.reduce((acc, item) => acc + item.precio * item.cantidad, 0);
}

function calcularEnvio(ciudad) {
  if (ciudad === "Quito") return 2;
  if (ciudad === "Guayaquil") return 3;
  if (ciudad === "Cuenca") return 2.5;
  return 4;
}

function enviarWhatsApp() {
  const nombre = document.getElementById("nombre").value.trim();
  const ciudad = document.getElementById("ciudad").value;
  const pago = document.getElementById("pago").value;

  if (!nombre || !ciudad || !pago || carrito.length === 0) {
    alert("Completa tus datos y a√±ade productos al carrito.");
    return;
  }

  let mensaje = `¬°Hola! Soy ${nombre} y quiero hacer un pedido:\n\n`;

  carrito.forEach(item => {
    mensaje += `‚Ä¢ ${item.nombre}`;
    if (item.tono) mensaje += ` - ${item.tono}`;
    mensaje += ` x${item.cantidad}\n`;
  });

  const subtotal = calcularSubtotal();
  const envio = calcularEnvio(ciudad);
  const total = subtotal + envio;

  mensaje += `\nüìç Ciudad: ${ciudad}`;
  mensaje += `\nüí≥ Forma de pago: ${pago}`;
  mensaje += `\nüßæ Subtotal: $${subtotal.toFixed(2)}`;
  mensaje += `\nüì¶ Env√≠o: $${envio.toFixed(2)}`;
  mensaje += `\nüíñ Total: $${total.toFixed(2)}`;

  const numeroWhatsApp = "593978691045";
  const url = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(mensaje)}`;

  window.open(url, "_blank");

  carrito.length = 0;
  actualizarCarrito();
  document.getElementById("form-cliente").reset();
}

function actualizarCarrito() {
  itemsCarrito.innerHTML = "";
  let subtotal = 0;

  carrito.forEach((item, index) => {
    subtotal += item.precio * item.cantidad;

    let imagen = "";
    if (item.tonos && item.tonos[item.tono]) {
      imagen = item.tonos[item.tono].imagenes[0];
    } else if (item.imagenes) {
      imagen = item.imagenes[0];
    }

    const div = document.createElement("div");
    div.className = "item-carrito";
    div.style.display = "flex";
    div.style.alignItems = "center";
    div.style.gap = "0.5rem";

    div.innerHTML = `
      <img src="${imagen}" style="width:40px;height:40px;border-radius:6px;" alt="${item.nombre}">
      <div style="flex:1;">
        ${item.nombre} (${item.tono})<br>x${item.cantidad} = $${(item.precio * item.cantidad).toFixed(2)}
      </div>
      <button onclick="eliminarDelCarrito(${index})"
        style="background:none;border:none;color:#f88;font-weight:bold;font-size:1.2rem;cursor:pointer;">
        ‚ùå
      </button>
    `;
    itemsCarrito.appendChild(div);
  });


  const ciudad = document.getElementById("ciudad").value;
  let envio = 0;
  if (ciudad === "Quito") envio = 2;
  else if (ciudad === "Guayaquil") envio = 3;
  else if (ciudad === "Cuenca") envio = 2.5;
  else if (ciudad === "Otra") envio = 4;

  const total = subtotal + envio;
  document.getElementById("subtotal").textContent = subtotal.toFixed(2);
  document.getElementById("envio").textContent = envio.toFixed(2);
  document.getElementById("total").textContent = total.toFixed(2);
}

  document.getElementById("ciudad").addEventListener("change", actualizarCarrito);

  

  mostrarProductos();

 function filtrarSubcategoria(nombre) {
  const secciones = document.querySelectorAll(".seccion-categoria");

  secciones.forEach(seccion => {
    const subcarruseles = seccion.querySelectorAll(".subcategoria-carrusel");
    let visible = false;

    subcarruseles.forEach(subcarrusel => {
      const titulo = subcarrusel.querySelector("h3").textContent.trim();

      if (nombre === "Todo" || titulo === nombre) {
        subcarrusel.style.display = "block";
        visible = true;
      } else {
        subcarrusel.style.display = "none";
      }
    });

    // Muestra la categor√≠a solo si alguna subcategor√≠a est√° visible
    seccion.style.display = visible ? "block" : "none";
  });

  // Cierra el men√∫ lateral al seleccionar
  document.getElementById("menu-lateral").classList.remove("abierto");
  document.getElementById("btn-menu").style.display = "inline-block";
}

  function mostrarTodos() {
    const productos = document.querySelectorAll(".producto");
    productos.forEach(p => p.style.display = "block");
  }
  function eliminarDelCarrito(index) {
  carrito.splice(index, 1);
  actualizarCarrito();
}
document.querySelectorAll('.subcategoria').forEach(sub => {
  sub.addEventListener('click', () => {
    cerrarMenu();
  });
});
document.querySelectorAll(".subcategoria").forEach(item => {
  item.addEventListener("click", () => {
    document.getElementById("menu-lateral").classList.remove("abierto");
    document.getElementById("btn-menu").style.display = "inline-block";
  });
});
function mostrarImagenGrande(url) {
  const modalImg = document.createElement("div");
  modalImg.style.position = "fixed";
  modalImg.style.top = "0";
  modalImg.style.left = "0";
  modalImg.style.width = "100%";
  modalImg.style.height = "100%";
  modalImg.style.background = "rgba(0,0,0,0.9)";
  modalImg.style.display = "flex";
  modalImg.style.justifyContent = "center";
  modalImg.style.alignItems = "center";
  modalImg.style.zIndex = "10000";
  modalImg.innerHTML = `
    <img src="${url}" style="max-width:90%;max-height:90%;border-radius:10px;" />
    <span onclick="this.parentElement.remove()" style="position:absolute;top:10px;right:20px;color:#fff;font-size:2rem;cursor:pointer;">‚úñ</span>
  `;
  document.body.appendChild(modalImg);
}
document.getElementById("cerrar-carrito").addEventListener("click", () => {
  document.getElementById("carrito").style.display = "none";
});
function toggleBuscador() {
  const buscador = document.getElementById("buscador");
  buscador.classList.toggle("visible");

  if (buscador.classList.contains("visible")) {
    buscador.focus();
  } else {
    buscador.value = "";
    mostrarProductos(); // vuelve a cargar todo si se cierra
  }
}
</script>
<footer>
  <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 2rem; padding: 1rem; text-align: left;">
    
      <p style="text-align:center; color:#888; margin-top:1rem;">üíñ Gracias por confiar en Aura Fugaz Beauty</p><!-- M√©todos de Pago -->
      
      
      <div style="width: 100%; text-align: left; margin-bottom: 2rem;">
  <h3 style="color: var(--rosa); font-size: 1.2rem;">üí≥ Formas de Pago</h3>
  <ul style="list-style: none; padding-left: 0; color: #ccc; font-size: 1.1rem;">
    <li style="margin-bottom: 0.5rem;"><span style="font-size: 1em;">üè¶</span> Transferencia Bancaria</li>
    <li style="margin-bottom: 0.5rem;"><span style="font-size: 1rem;">üí∞</span> Efectivo</li>
    <li style="margin-bottom: 0.5rem;"><span style="font-size: 1rem;">üì≤</span> Pago Online</li>
    <li style="margin-bottom: 0.5rem;"><span style="font-size: 1rem;">üì¶</span> Contra Entrega</li>
  </ul>
</div>

    <!-- M√©todos de Env√≠o -->
<div style="width: 100%; text-align: left; margin-bottom: 2rem;">
  <h3 style="color: var(--rosa); font-size: 1.2rem;">üöõ M√©todos de Env√≠o</h3>
  <ul style="list-style: none; padding-left: 0; color: #ccc; font-size: 1.1rem;">
    <li style="margin-bottom: 0.5rem;"><span style="font-size: 1rem;">üì¶</span> Servientrega</li>
    <li style="margin-bottom: 0.5rem;"><span style="font-size: 1rem;">üí∞</span> Efectivo</li>
    <li style="margin-bottom: 0.5rem;"><span style="font-size: 1rem;">üì≤</span> Pago Online</li>
    <li style="margin-bottom: 0.5rem;"><span style="font-size: 1.5rem;">üì¶</span> Contra Entrega</li>
  </ul>
</div>

</footer>
</body>
</html>
